
<div class="spinner-container" *ngIf="loading">
  <mat-spinner></mat-spinner>
</div>
  
<div *ngIf="!loading && !model">
    some kind of error
</div>

<div *ngIf="model">
  <h3>{{model.label}}</h3>

  <p>
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>Required Plugins</mat-panel-title>
      <mat-panel-description>
        this model requires {{model.plugins.requiredPlugins.length}} plugins
      </mat-panel-description>
    </mat-expansion-panel-header>

    <p *ngFor="let plugin of model.plugins.requiredPlugins">
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>{{plugin.label}}</mat-panel-title>
        <mat-panel-description>
          {{plugin.placeTypes.placeTypes.length}} Places,
          {{plugin.relationshipTypes.relationshipTypes.length}} Relationships
        </mat-panel-description>
      </mat-expansion-panel-header>

      <p>
      <mat-chip-list *ngIf="plugin.placeTypes.placeTypes.length">
        Place Types:
        <mat-chip *ngFor="let placeType of plugin.placeTypes.placeTypes">{{placeType.label}}</mat-chip>
      </mat-chip-list>
      </p>

      <p>
      <mat-chip-list *ngIf="plugin.relationshipTypes.relationshipTypes.length">
        Relationship Types:
        <mat-chip *ngFor="let relationshipType of plugin.relationshipTypes.relationshipTypes">{{relationshipType.label}}</mat-chip>
      </mat-chip-list>
      </p>
    </mat-expansion-panel>
    </p>

  </mat-expansion-panel>
  </p>

  <p>
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>Roles</mat-panel-title>
      <mat-panel-description>
        this model defines {{model.roles.roles.length}} roles
      </mat-panel-description>
    </mat-expansion-panel-header>

    <mat-chip-list *ngIf="model.roles.roles.length">
        Roles:
        <mat-chip *ngFor="let role of model.roles.roles">{{role.label}}</mat-chip>
      </mat-chip-list>

  </mat-expansion-panel>
  </p>

  <p>
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>Part Prototypes</mat-panel-title>
      <mat-panel-description>
        this model defines {{model.partPrototypes.partPrototypes.length}} part prototypes
      </mat-panel-description>
    </mat-expansion-panel-header>

    <mat-chip-list *ngIf="model.partPrototypes.partPrototypes.length">
      Part Prototypes:
      <mat-chip *ngFor="let partPrototype of model.partPrototypes.partPrototypes">{{partPrototype.label}}</mat-chip>
    </mat-chip-list>
    <p *ngFor="let partPrototype of model.partPrototypes.partPrototypes">
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{partPrototype.label}}
            <ng-container *ngIf="partPrototype.extends">
              <ng-container *ngTemplateOutlet="partPrototypeParentRef;context:partPrototype"></ng-container>
            </ng-container>
          </mat-panel-title>
          <mat-panel-description>
            this part prototype defines {{partPrototype.places.placePrototypes.length}} places
          </mat-panel-description>
        </mat-expansion-panel-header>
    
        <mat-chip-list *ngIf="partPrototype.places.placePrototypes.length">
            Place Prototypes:
            <mat-chip *ngFor="let placePrototype of partPrototype.places.placePrototypes">{{placePrototype.label}}</mat-chip>
          </mat-chip-list>
    
      </mat-expansion-panel>
    </p>
        


  </mat-expansion-panel>
  </p>
</div>

<ng-template #partPrototypeParentRef let-extends="extends">
  &larr; {{idFromUrl(extends)}}
</ng-template>